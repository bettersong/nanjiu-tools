import{d as W,m as ce,r as g,n as $,h as z,E as H,q as _e,s as ie,v as re,w as me,x as de,y as ve,a as C,j as m,z as f,i as l,c as L,k as A,A as P,B as pe,o as h,C as S,u as w,t as J,p as O,l as K,D as Fe,G as fe,I as he,F as Ee,J as be}from"./vendor-92f39675.js";import{_ as Q}from"./plugin-vueexport-helper-3bc06e16.js";const Ie="/nanjiu-tools/assets/gq0-0ba6e7fe.jpg",xe="/nanjiu-tools/assets/gq1-f84b5b26.jpg",we="/nanjiu-tools/assets/gq10-bd5b8000.png",qe="/nanjiu-tools/assets/gq2-bd7465b1.jpg",ye="/nanjiu-tools/assets/gq20-c53312f9.png",je="/nanjiu-tools/assets/gq3-c6bcb20a.jpg",Ae="/nanjiu-tools/assets/gq30-3c8ac285.png",Ce="/nanjiu-tools/assets/gq4-bcbe5780.png",Be="/nanjiu-tools/assets/gq5-0699ec50.jpg",De="/nanjiu-tools/assets/gq6-4e1dc915.png",Le="/nanjiu-tools/assets/tem1-cf4991ef.png",ke="/nanjiu-tools/assets/tem2-c717c3b5.png",Ve="/nanjiu-tools/assets/tem3-72a98f0f.png",Re="/nanjiu-tools/assets/tem4-d5bdddd0.png",$e="/nanjiu-tools/assets/tem5-1c2ce2b3.png",Se="/nanjiu-tools/assets/tem6-cfc9b396.png",Ue="/nanjiu-tools/assets/tem7-9b09dfba.png",X=r=>(O("data-v-e77ee525"),r=r(),K(),r),Ge={class:"generate_area"},Te=X(()=>l("div",{class:"upload_title"},"\u5408\u6210\u4F60\u7684\u5FAE\u4FE1\u5934\u50CF",-1)),Me={key:2,class:"desc"},Ne=X(()=>l("canvas",{id:"my_canvas",width:"300",height:"300"},null,-1)),Pe=W({__name:"generateImg",props:{user_img:{},template_id:{},gqList:{}},setup(r,{expose:u}){const b=r,{user_img:_,template_id:a,gqList:n}=ce(b),d=g(null),i=g(null),q=g(!1),o=g(""),c=g("#FED800"),I=g(!1),v=g(0),y=g(!1),V=e=>e===100?"\u5408\u6210\u6210\u529F":`${e}%`,p=$(()=>{var e;return(e=n.value[a.value-1].has)==null?void 0:e.includes("text")}),Y=$(()=>{var e;return(e=n.value[a.value-1].textLabel)!=null?e:""}),Z=$(()=>{var t;return`\u6700\u591A\u8F93\u5165${(t=n.value[a.value-1].textLength)!=null?t:""}\u4E2A\u5B57`}),U=["iPhone","Android","Windows Phone"],G=window.navigator.userAgent;z(()=>{d.value=document.getElementById("my_canvas"),i.value=d.value.getContext("2d");const e=window.devicePixelRatio||1;d.value.width=300*e,d.value.height=300*e,d.value.style.width="300px",d.value.style.height="300px",i.value.scale(e,e),N()});const T=()=>{var e;v.value=0,(e=i.value)==null||e.clearRect(0,0,300,300),q.value=!1,y.value=!1},B=()=>{v.value=100,q.value=!0},M=g(null),ee=()=>{var e;T(),U.some(t=>G.includes(t))&&((e=M.value)==null||e.scrollIntoView()),_.value?(I.value=!0,y.value=!0,v.value=Number((Math.random()*50).toFixed(0)),a.value===1?te(i.value):a.value===2?se(i.value):a.value===4||a.value===6?oe(i.value):ue(i.value)):(console.log("\u751F\u6210\u56FE\u7247",_.value),P({message:"\u8BF7\u5148\u4E0A\u4F20\u5934\u50CF\uFF5E",type:"warning"}))},te=e=>{const t=new Image;t.src=_.value;const s=new Image;s.src=n.value[a.value-1].img,t.onload=()=>{e.drawImage(t,0,0,300,300),s.onload=()=>{var x;e.drawImage(s,0,0,300,300),e.fillStyle=c.value,e.font="26px kaiti",e.fillText((x=o.value)!=null?x:"",52,245),B()}}},se=e=>{const t=new Image;t.src=_.value;const s=new Image;s.src=n.value[a.value-1].img,t.onload=()=>{e.drawImage(t,0,0,300,300),s.onload=()=>{e.drawImage(s,0,0,300,300),B()}}},ae=(e,t,s,x,E)=>{e.save(),e.font=E;for(var F=0;F<t.length;F++)e.fillText(t[F],s,x+F*E.size);e.restore()},ue=e=>{const t=new Image;t.src=_.value;const s=new Image;s.src=n.value[a.value-1].img,t.onload=()=>{e.drawImage(t,0,0,300,300),s.onload=()=>{e.drawImage(s,0,0,300,300),B()}}},oe=e=>{const t=new Image;t.src=_.value;const s=new Image;s.src=n.value[a.value-1].img,t.onload=()=>{e.drawImage(t,0,0,300,300),s.onload=()=>{var E,F;e.drawImage(s,0,0,300,300),e.fillStyle=c.value,e.font="20px kaiti",((F=(E=o.value)==null?void 0:E.split("\uFF0C"))!=null?F:[]).forEach((j,D)=>{ae(e,j!=null?j:"",20+D*20,186+D*20,{size:20})}),B()}}},le=()=>{if(!q.value){P({message:"\u8BF7\u5148\u5408\u6210\u5934\u50CF\uFF5E",type:"warning"});return}const e=d.value.toDataURL("image/png");if(U.some(s=>G.includes(s))){pe.alert(`
    \u8BF7\u957F\u6309\u56FE\u7247\u4FDD\u5B58
    <img src="${e}" style="width: 100%;height: 100%;object-fit: contain;" />
    `,"\u4FDD\u5B58\u56FE\u7247",{dangerouslyUseHTMLString:!0});return}const t=document.createElement("a");t.href=e,t.download="\u56FD\u5E86\u5934\u50CF.png",t.click()},ne=()=>{o.value="",v.value=0},N=()=>{var e,t;o.value=(e=n.value[a.value-1].text)!=null?e:"",c.value=(t=n.value[a.value-1].textColor)!=null?t:"#FED800",I.value=!1};return u({clearCanvas:T,clear:ne,init:N}),(e,t)=>{const s=H,x=_e,E=ie,F=re,j=me,D=de,ge=ve;return h(),C("div",Ge,[Te,m(s,{type:"primary",onClick:ee},{default:f(()=>[S("\u5408\u6210\u5934\u50CF")]),_:1}),m(s,{type:"success",onClick:le},{default:f(()=>[S("\u4E0B\u8F7D\u5408\u6210\u5934\u50CF")]),_:1}),m(D,{inline:!0,style:{"margin-top":"8px"}},{default:f(()=>[p.value?(h(),L(E,{key:0,label:Y.value},{default:f(()=>[m(x,{size:"small",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=R=>o.value=R),placeholder:Z.value,maxlength:w(n)[w(a)-1].textLength,clearable:""},null,8,["modelValue","placeholder","maxlength"])]),_:1},8,["label"])):A("",!0),p.value?(h(),L(E,{key:1,label:"\u9009\u62E9\u6587\u5B57\u989C\u8272"},{default:f(()=>[m(F,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=R=>c.value=R)},null,8,["modelValue"])]),_:1})):A("",!0),w(n)[w(a)-1].desc?(h(),C("div",Me," \u8BF4\u660E\uFF1A"+J(w(n)[w(a)-1].desc),1)):A("",!0),l("div",null,[m(j,{percentage:v.value,indeterminate:!1,format:V},null,8,["percentage"])])]),_:1}),l("div",{ref_key:"mergeImg",ref:M,class:"generate_img"},[y.value?A("",!0):(h(),L(ge,{key:0,class:"empty_box",description:"\u5408\u6210\u533A"})),Ne],512)])}}});const We=Q(Pe,[["__scopeId","data-v-e77ee525"]]),k=r=>(O("data-v-265ea6cd"),r=r(),K(),r),ze={class:"generate_container"},He=k(()=>l("div",{class:"generate_title"},"/\u751F\u6210\u5FAE\u4FE1\u5934\u50CF/",-1)),Je={class:"generate_center"},Oe={class:"generate_tools"},Ke={class:"upload_img"},Qe=k(()=>l("div",{class:"upload_title"},"\u4E0A\u4F20\u4F60\u7684\u5FAE\u4FE1\u5934\u50CF",-1)),Xe={class:"show_avator"},Ye=["src"],Ze={class:"choose_gq"},et=k(()=>l("div",{class:"upload_title"},"\u9009\u62E9\u5408\u6210\u6A21\u7248",-1)),tt=["src"],st=k(()=>l("div",{class:"footer"},"design by \u524D\u7AEF\u5357\u7396",-1)),at=W({__name:"GenerateWxAvator",setup(r){const u=(o,c="png")=>new URL(Object.assign({"/src/assets/img/gq0.jpg":Ie,"/src/assets/img/gq1.jpg":xe,"/src/assets/img/gq10.png":we,"/src/assets/img/gq2.jpg":qe,"/src/assets/img/gq20.png":ye,"/src/assets/img/gq3.jpg":je,"/src/assets/img/gq30.png":Ae,"/src/assets/img/gq4.png":Ce,"/src/assets/img/gq5.jpg":Be,"/src/assets/img/gq6.png":De,"/src/assets/img/tem1.png":Le,"/src/assets/img/tem2.png":ke,"/src/assets/img/tem3.png":Ve,"/src/assets/img/tem4.png":Re,"/src/assets/img/tem5.png":$e,"/src/assets/img/tem6.png":Se,"/src/assets/img/tem7.png":Ue})[`/src/assets/img/${o}.${c}`],self.location).href,b=g(""),_=g(1),a=g([{id:1,name:"\u6A21\u72481",img:u("gq0","jpg"),template:u("tem1"),has:["text"],textLabel:"\u8BF7\u8F93\u5165\u4F60\u7684\u59D3",desc:"\u6700\u591A\u8F93\u51651\u4E2A\u5B57",text:"\u5B8B",textLength:1},{id:2,name:"\u6A21\u72482",img:u("gq1","jpg"),template:u("tem2")},{id:3,name:"\u6A21\u72483",img:u("gq2","jpg"),template:u("tem3")},{id:4,name:"\u6A21\u72484",img:u("gq3","jpg"),template:u("tem4"),has:["text"],textLabel:"\u8BF7\u8F93\u5165\u795D\u798F\u8BED",textColor:"#FED800",text:"\u751F\u5728\u56FD\u65D7\u4E0B\uFF0C\u957F\u5728\u6625\u98CE\u91CC",desc:"\u6700\u591A\u8F93\u516512\u4E2A\u5B57, \u8BF7\u7528\u4E2D\u6587\u9017\u53F7\u9694\u5F00",textLength:12},{id:5,name:"\u6A21\u72485",img:u("gq4"),template:u("tem5")},{id:6,name:"\u6A21\u72486",img:u("gq5","jpg"),template:u("tem6"),has:["text"],textLabel:"\u8BF7\u8F93\u5165\u795D\u798F\u8BED",textColor:"#FED800",desc:"\u6700\u591A\u8F93\u516512\u4E2A\u5B57, \u8BF7\u7528\u4E2D\u6587\u9017\u53F7\u9694\u5F00",text:"\u4E0D\u8D1F\u97F6\u534E\uFF0C\u53EA\u4E89\u671D\u5915",textLength:12},{id:7,name:"\u6A21\u72487",img:u("gq6"),template:u("tem7")}]);z(()=>{});const n=(o,c)=>{console.log(o,c);const I=new FileReader;I.readAsDataURL(o.raw),I.onload=v=>{b.value=v.target.result}},d=()=>{b.value=""},i=g(null),q=o=>{console.log(o),_.value=o,i.value.clear(),i.value.init()};return(o,c)=>{const I=H,v=Fe,y=fe,V=he;return h(),C("div",ze,[He,l("div",Je,[l("div",Oe,[l("div",Ke,[Qe,m(v,{ref:"uploadRef",class:"upload-demo","auto-upload":!1,"on-change":n,"on-remove":d},{trigger:f(()=>[m(I,{type:"primary"},{default:f(()=>[S("\u4E0A\u4F20\u5934\u50CF")]),_:1})]),_:1},512),l("div",Xe,[b.value?(h(),C("img",{key:0,src:b.value},null,8,Ye)):A("",!0)])]),l("div",Ze,[et,m(V,{class:"gq_list",modelValue:_.value,"onUpdate:modelValue":c[0]||(c[0]=p=>_.value=p),onChange:q},{default:f(()=>[(h(!0),C(Ee,null,be(a.value,p=>(h(),L(y,{key:p.id,label:p.id},{default:f(()=>[l("div",null,J(p.name),1),l("img",{src:p.template,alt:""},null,8,tt)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])]),m(We,{ref_key:"generateImgRef",ref:i,user_img:b.value,template_id:_.value,gqList:a.value},null,8,["user_img","template_id","gqList"])]),st])}}});const lt=Q(at,[["__scopeId","data-v-265ea6cd"]]);export{lt as default};
